{% extends "_project_base.html" %}
{% load i18n static filters %}

{% block title %}{% trans 'Budget Allocation Item' %} -  {{ fy }}{% endblock %}

{% block head_end %}
    <script src="{% static 'js/project/budget_allocation_item.js' %}"></script>
    <script>
        ko_data = {{data|jsonify}};
    </script>
{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    <li><a href="#">{% trans 'Budget Allocation Item' %}</a></li>
{% endblock %}

{% block content %}

    <div class="visible-print-block form-header">
        <h4 class="text-center">{% localize_header %}</h4>
        <h4 class="text-center">{% trans 'Budget Allocation Item' %} - {{ fy }}</h4>
    </div>
    <div class="well">
        <form method="post" enctype="multipart/form-data" data-bind="submit: save" name="demand-form">
            {% csrf_token %}

            <div data-bind="with: table_view" class="selectize_width">
                <table class="table table-striped table-responsive table-bordered center-headings">
                    <thead>
                    <th>{% trans "Budget Head" %}</th>
                    <th>{% trans "GON" %}</th>
                    <!-- ko foreach: $root.aids -->
                    <th data-bind="text: $data "></th>
                    <!-- /ko -->
                    <th>{% trans 'Total' %}</th>
                    <th></th>
                    </thead>
                    <tbody id="budget-allocation">
                    <!-- ko foreach: rows -->
                    <tr>
                        <td>
                            <select data-bind="selectize: $root.available_budget_heads, value: budget_head_id, object: budget_head"></select>
                        </td>
                        <td data-bind="editableText: goa_amount, numeric: true"></td>
                        <!-- ko foreach: $root.count -->
                        <td data-bind="editableText: $parent[$data], numeric: true"></td>
                        <!-- /ko-->
                        <td data-bind="text: total()"></td>
                        <td class="hidden-print">
                            <a href="#" class="close tiny secondary" data-bind="click: $parent.removeRow">x</a>
                        </td>
                    </tr>
                    <!-- /ko -->
                    </tbody>
                </table>
                <a class="btn btn-default btn-raised" data-bind="click: addRow">
                    {% trans 'Add New Row' %}
                </a>
            </div>

            <input type="submit" class="btn btn-info btn-raised btn-lg" value="{% trans 'Save' %}">
        </form>


    </div>
    </div>

{% endblock %}
